/*
 * RealtimeMonitor v1.1
 * https://www.github.com/kloverde/js-RealtimeMonitor
 *
 * Copyright (c) 2018, Kurtis LoVerde
 * All rights reserved.
 *
 * Donations:  https://paypal.me/KurtisLoVerde/10
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *
 *     1. This software may not be used by any for-profit entity, whether a
 *        business, person, or other, or for any for-profit purpose.
 *     2. Redistributions of source code must retain the above copyright
 *        notice, this list of conditions and the following disclaimer.
 *     3. Redistributions in binary form must reproduce the above copyright
 *        notice, this list of conditions and the following disclaimer in the
 *        documentation and/or other materials provided with the distribution.
 *     4. Neither the name of the copyright holder nor the names of its
 *        contributors may be used to endorse or promote products derived from
 *        this software without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
 * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE
 * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
 * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR
 * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER
 * CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
 * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */
"use strict";function RealtimeMonitor(){function b(Ob){const Pb=document.createElement("canvas"),Qb=Pb.getContext("2d");return Pb.width=Ob.width,Pb.height=Ob.height,Qb.drawImage(Ob,0,0,Ob.width,Ob.height),Pb.toDataURL("image/"+Ob.src.replace(/^.*\./,""))}function c(){return"Notification"in window?"denied"===Notification.permission||"blocked"===Notification.permission?void(Mb=!1):"granted"===Notification.permission?void(Mb=!0):void("default"===Notification.permission&&Notification.requestPermission(function(Ob){"granted"===Ob&&(Mb=!0)})):(Lb=!1,void(Mb=!1))}function d(Ob,Pb){const Qb=document.createElement("span");return Qb.id=Ob+Pb,Qb.className="graphColor",Qb.classList.add(Pb),Qb}function h(Ob,Pb,Qb,Rb){const Sb=document.createElement("div");return Sb.id=Ob+Pb,Sb.className="applicationMenuItem",Sb.appendChild(document.createTextNode(Qb)),Sb.addEventListener("click",function(){Rb(),x(Ob)}),Sb}function k(Ob,Pb,Qb,Rb,Sb){const Tb=document.createElement("div"),Ub=document.createElement("label"),Vb=document.createElement("span");let Wb=null,Xb=null;return Tb.className="fieldContainer",Ob===hb?(Pb=fb+Pb,Rb="Lowest"+" "+Rb,Xb=Ba):Ob===ib?(Pb=eb+Pb,Rb="Highest"+" "+Rb,Xb=Ba):Ob===gb&&(Wb=document.createElement("div"),Wb.id=Qb+Ta+Pb,Wb.className="status",Tb.classList.add("currentValue"),Tb.classList.add("hasGraph"),Tb.appendChild(Wb),Ub.addEventListener("click",function(){z(Qb+Oa+Pb)})),Vb.id=Qb+Pb,Xb&&(Ub.className="highLowLabel",Vb.className=Xb),Ub.id=Na+Vb.id,Ub.setAttribute("for",Vb.id),Ub.appendChild(document.createTextNode(Rb+":")),Tb.appendChild(Ub),Tb.appendChild(Vb),Sb&&Tb.appendChild(l(Xb,Sb,Pb,Qb)),Tb}function l(Ob,Pb,Qb,Rb){const Sb=document.createElement("span");return Sb.id=Rb+Ua+Qb,Sb.className=ra,Ob&&Sb.classList.add(Ob),Sb.appendChild(document.createTextNode(Pb)),Sb}function m(){const Ob=document.createElement("div");return Ob.className="fieldSeparator",Ob}function n(Ob,Pb,Qb){const Rb=document.createElement("canvas"),Sb=Rb.getContext("2d");Rb.id=Ob+Oa+Pb,Rb.className=sa;const Tb=new Chart(Sb,{type:"line",data:{datasets:[{label:"",data:[],backgroundColor:q(Ob),borderColor:r(Ob),borderWidth:1}]},options:{legend:{display:!1},title:{display:!0,text:Qb,position:"top",fontColor:p(Ob)},tooltips:{mode:"point",displayColors:!1},elements:{line:{tension:0}},animation:{duration:0},hover:{animationDuration:0}}});return{canvas:Rb,graph:Tb}}function o(Ob){const Pb=document.getElementById(Ob+oa);return Pb?window.getComputedStyle(Pb).getPropertyValue("background-color"):[]}function p(Ob){const Pb=document.getElementById(Ob+na);return Pb?window.getComputedStyle(Pb).getPropertyValue("background-color"):[]}function q(Ob){const Pb=document.getElementById(Ob+la);return Pb?window.getComputedStyle(Pb).getPropertyValue("background-color"):[]}function r(Ob){const Pb=document.getElementById(Ob+ma);return Pb?window.getComputedStyle(Pb).getPropertyValue("background-color"):[]}function t(Ob){if(Lb){const Pb=document.getElementById(Ob+Ka).innerText;u(Ob,Pb!==Xa)}else alert("Notifications are not supported by your browser.  To make use of notification functionality, you'll need to install a supporting browser, such as a recent version of Firefox or Chrome.")}function u(Ob,Pb){const Qb=document.getElementById(Ob+Ka);Qb.innerText=Pb?Xa:"Unmute Notifications",Cb[Ob].notifications=Pb}function w(Ob){const Pb=document.getElementById(Ob+Fa),Qb=document.getElementById(Ob+Ga);Qb&&Pb&&(Qb.classList.contains(ra)?(Qb.classList.remove(ra),Pb.classList.add(da)):(Qb.classList.add(ra),Pb.classList.remove(da)))}function x(Ob){const Pb=document.getElementById(Ob+Fa),Qb=document.getElementById(Ob+Ga);Qb&&(Qb.classList.add(ra),Pb.classList.remove(da))}function y(Ob){const Pb=document.getElementById(Ob+Da),Qb=document.getElementById(Ob+Ja);Pb.classList.contains(ua)?(Pb.classList.remove(ua),Qb.innerHTML=Va):(Pb.classList.add(ua),Qb.innerHTML="Maximize",x(Ob))}function z(Ob){const Pb=document.getElementById(Ob),Qb=Pb.parentNode;for(let Rb=0;Rb<Qb.childNodes.length;Rb++){const Sb=Qb.childNodes[Rb].classList;Sb.contains(sa)||Sb.add(sa)}Pb.classList.remove(sa)}function A(Ob){const Pb=document.getElementById(Ob+Ia),Qb=-1!==Pb.innerHTML.indexOf(_a);Qb?C(Ob,!1):B(Ob)}function B(Ob){function Pb(Rb){J(Ob);const Sb=JSON.parse(Rb);L(Ob,Sb),P(Ob)}const Qb=Cb[Ob].url;if(Eb[tb]||(Eb[tb]=window.setInterval(function(){for(let Rb in Gb){const Sb=Gb[Rb];for(let Tb in Sb){const Ub=Sb[Tb].canvas;if(U(Ub)){M(Rb,Tb);break}}}},3e3)),!Eb[Ob])if("GET"===Qb.method||"POST"===Qb.method)Eb[Ob]=window.setInterval(function(){"GET"===Qb.method?F(Qb.address,Pb):"POST"===Qb.method&&G(Qb.address,Qb.postData,Pb)},1e3*Qb.pollInterval);else if("websocket"===Qb.method){const Rb=new WebSocket(Qb.address);Fb[Ob]=Rb,Rb.onopen=function(){Hb[Ob]=qb,X(Qb.wsGreeting)&&Rb.send(JSON.stringify(Qb.wsGreeting))},Rb.onclose=function(Sb){Hb[Ob]!==sb&&(0<=Cb[Ob].url.wsCloseCodes.indexOf(Sb.code)?D(Ob,15):Hb[Ob]=rb)},Rb.onmessage=function(Sb){Pb(Sb.data)}}document.getElementById(Ob+Ia).innerHTML=_a}function C(Ob,Pb){if(!Pb){const Rb=ub+Ob;X(Eb[Rb])&&(window.clearInterval(Eb[Rb]),Eb[Rb]=void 0,Fb[Ob].onclose=void 0),Hb[Ob]=rb,Nb[Ob]&&(Nb[Ob].close(),Nb[Ob]=void 0)}X(Eb[Ob])&&(window.clearInterval(Eb[Ob]),Eb[Ob]=void 0),X(Fb[Ob])&&((0===Fb[Ob].readyState||1===Fb[Ob].readyState)&&Fb[Ob].close(zb),Fb[Ob]=void 0);const Qb=document.getElementById(Ob+Ia);Qb&&(Qb.innerHTML=$a)}function D(Ob,Pb){const Rb=ub+Ob;X(Eb[Rb])||(Hb[Ob]=sb,Eb[Rb]=setInterval(function(){0<Pb&&Hb[Ob]!==rb?(I(Ob,"Connection lost.  Reconnecting...("+Pb+")"),console.log("Reconnecting... attempts remaining: "+Pb),C(Ob,!0),B(Ob),Pb=Hb[Ob]===qb?0:Pb-1):0==Pb&&(clearInterval(Eb[Rb]),Hb[Ob]===qb?Eb[Rb]=void 0:(I(Ob,"Connection lost - could not reconnect"),C(Ob,!1)))},7e3))}function F(Ob,Pb){const Qb=H("GET",Ob,Pb);Qb.send()}function G(Ob,Pb,Qb){const Rb=H("POST",Ob,Qb);Rb.setRequestHeader("Content-Type","application/x-www-form-urlencoded");const Sb=Object.keys(Pb).map(function(Tb){return encodeURIComponent(Tb)+"="+encodeURIComponent(Pb[Tb])}).join("&");Rb.send(Sb)}function H(Ob,Pb,Qb){const Rb=new XMLHttpRequest;return Rb.open(Ob,Pb),Rb.setRequestHeader("X-Requested-With","XMLHttpRequest"),Rb.onreadystatechange=function(){4===Rb.readyState&&200===Rb.status&&"function"==typeof Qb&&Qb(Rb.responseText)},Rb}function I(Ob,Pb){const Qb=document.getElementById(Ob+Ma);Qb.innerText=Pb,Qb.classList.remove(sa)}function J(Ob){const Pb=document.getElementById(Ob+Ma);Pb.classList.add(sa),Pb.innerText=""}function K(Ob){C(Ob,!1);const Pb=document.getElementById(Ob);Pb&&Pb.parentNode.removeChild(Pb),Db[Ob]=void 0,Cb[Ob]=void 0}function L(Ob,Pb){const Qb=Db[Ob];for(let Rb in Pb)if(W(Qb[Rb])){const Sb=fb+Rb,Tb=eb+Rb;Qb[Rb]=Pb[Rb],Qb[Sb]=null===Qb[Sb]||Qb[Sb]>Qb[Rb]?Qb[Rb]:Qb[Sb],Qb[Tb]=null===Qb[Tb]||Qb[Tb]<Qb[Rb]?Qb[Rb]:Qb[Tb]}}function M(Ob,Pb){const Qb=Gb[Ob][Pb].graph,Rb=Qb.data.datasets[0],Sb=p(Ob),Tb=o(Ob);Chart.defaults.global.defaultFontColor=Sb,Qb.options.title.fontColor=Sb,Qb.options.scales.xAxes[0].gridLines.color=Tb,Qb.options.scales.yAxes[0].gridLines.color=Tb,Rb.backgroundColor=q(Ob),Rb.borderColor=r(Ob),Qb.update();const Ub=O();if(Kb!==Ub){Kb=Ub;const Vb=new CustomEvent("RTMThemeChange",{detail:{themeName:Ub}});document.dispatchEvent(Vb)}}function N(){return document.querySelectorAll("link[rel='alternate stylesheet']")}function O(){let Ob=null;const Pb=N();for(let Qb=0;Qb<Pb.length;Qb++)if(!Pb[Qb].disabled){Ob=Pb[Qb].title;break}return Ob}function P(Ob){function Pb(Yb,Zb,$b){const _b=Yb+Oa+Zb,ac=Gb[Yb][_b].graph,bc=ac.data.datasets[0],cc=bc.data,dc=ac.data.labels;M(Yb,_b),35===cc.length&&(dc.shift(),cc.shift()),ac.data.labels.push(""),cc.push($b),ac.update()}function Qb(Yb,Zb){let $b=wa;return X(Yb)&&X(Yb.danger)&&Zb<=Yb.danger?$b=ya:X(Yb)&&X(Yb.warn)&&Zb<=Yb.warn&&($b=xa),$b}function Rb(Yb,Zb){let $b=wa;return X(Yb.danger)&&Zb>=Yb.danger?$b=ya:X(Yb.warn)&&Zb>=Yb.warn&&($b=xa),$b}const Sb=Db[Ob],Tb=document.getElementById(Ob+Ea);let Ub=!1,Vb=!1,Wb=!1;const Xb=/^(lowest|highest)/;for(let Yb in Sb){const Zb=Yb.replace(Xb,""),$b=Cb[Ob].lowThresholds[Zb],_b=Cb[Ob].highThresholds[Zb],ac=Sb[Yb],bc=document.getElementById(Ob+Yb);if(Wb=!Wb&&(X($b)||X(_b)),bc){const cc=document.getElementById(Na+Ob+Yb),dc=0===Yb.indexOf(fb),ec=!dc&&0===Yb.indexOf(eb),fc=!ec&&!dc,gc=document.getElementById(Ob+Ta+Yb);let hc=null,ic=null,jc=$b||_b?wa:za;cc.title="",bc.innerHTML="",bc.appendChild(document.createTextNode(ac)),fc&&(!Cb[Ob].fields[Yb].showLowest&&(cc.title+="lowest: "+Db[Ob][fb+Yb]),!Cb[Ob].fields[Yb].showHighest&&(cc.title+=(Cb[Ob].fields[Yb].showLowest?"":", ")+"highest: "+Db[Ob][eb+Yb])),$b&&(hc=Qb($b,ac),hc===xa?fc&&(Ub=!0):hc===ya&&fc&&(Vb=!0)),_b&&(ic=Rb(_b,ac),ic===xa?fc&&(Ub=!0):ic===ya&&fc&&(Vb=!0)),(hc===xa||ic===xa)&&(jc=xa),(hc===ya||ic===ya)&&(jc=ya),gc&&Q(gc,jc);const kc=document.getElementById(Ob+Ua+Yb);kc&&kc.classList.remove(ra),dc||ec?(Q(bc,jc),kc&&Q(kc,jc)):Pb(Ob,Yb,ac)}}Tb.classList.remove(wa),Tb.classList.remove(xa),Tb.classList.remove(ya),Wb?Vb?(Tb.classList.add(ya),Cb[Ob].notifications&&S(kb,Ob)):Ub?(Tb.classList.add(xa),Cb[Ob].notifications&&S(jb,Ob)):Tb.classList.add(wa):Tb.classList.add(za)}function Q(Ob,Pb){Ob.classList.remove(wa),Ob.classList.remove(xa),Ob.classList.remove(ya),Ob.classList.add(Pb)}function R(Ob){Nb[Ob.target.data.panelId]=null}function S(Ob,Pb){let Qb=Nb[Pb];const Rb=!X(Qb),Sb=!Rb&&Qb.data.type<Ob;if(Rb||Sb){Sb&&(Qb.removeEventListener("close",R),Qb.close(),Qb=null);let Tb,Ub,Vb,Wb=new Date;const Zb=Wb.toLocaleDateString({year:"numeric",month:"long",day:"numeric"}),$b=Wb.toLocaleTimeString({hour12:!0}),_b=Zb+" "+$b;if(Ob===jb)Tb=vb[wb],Ub="Warning:  "+Cb[Pb].title,Vb=Cb[Pb].title+" reached a warning threshold on "+_b;else if(Ob===kb)Tb=vb[xb],Ub="Danger:  "+Cb[Pb].title,Vb=Cb[Pb].title+" reached a danger threshold on "+_b;else throw new Error("Invalid threshold notification type");const ac=T(Ob,Pb,Tb,Ub,Vb,"threshold"+Pb,!0);ac.addEventListener("close",R),Nb[Pb]=ac}}function T(Ob,Pb,Qb,Rb,Sb,Tb,Ub){let Vb=null;if(c(),Mb){Vb=new Notification(Rb,{body:Sb,icon:Qb,tag:Tb,data:{type:Ob,panelId:Pb},requireInteraction:Ub})}return Vb}function U(Ob){return!Ob.classList.contains(sa)&&!Ob.classList.contains(ra)}function V(Ob,Pb){function Qb(Ub,Vb,Wb,Xb){if(Xb&&!X(Ub))throw new Error("Invalid configuration:  property '"+Vb+"' is required");if(X(Ub))if("array"===Wb){if(!Array.isArray(Ub))throw new Error("Invalid configuration:  property '"+Vb+"' must be of type '"+Wb+"' but is '"+typeof Ub+"'");}else if(typeof Ub!==Wb)throw new Error("Invalid configuration:  property '"+Vb+"' must be of type '"+Wb+"' but is '"+typeof Ub+"'")}const Rb="Invalid configuration:  ";if(!Ob)throw new Error("panelId has no value");if(!Pb)throw new Error(Rb+"no configuration was provided");const Sb={};Sb.url={},Sb.url.pollInterval=yb,Sb.lowThresholds={},Sb.highThresholds={},Sb.autoConnect=!0,Sb.startMinimized=!1,Sb.notifications=!0,Sb.fields={},Sb.lowThresholds={},Sb.highThresholds={},Qb(Pb.title,"title","string",!0),Sb.title=Pb.title,Qb(Pb.url,"url","object",!0),Qb(Pb.url.address,"url.address","string",!0),Sb.url.address=Pb.url.address;let Tb=null;if(0===Pb.url.address.indexOf("http://")||0===Pb.url.address.indexOf("https://")){if(Qb(Pb.url.method,"url.method","string",!0),Tb=Pb.url.method.toUpperCase(),"GET"!==Tb&&"POST"!==Tb)throw new Error(Rb+"url.method must be GET or POST");Sb.url.method=Tb}else if(0===Pb.url.address.indexOf("ws://")||0===Pb.url.address.indexOf("wss://")){if(X(Pb.url.method))throw new Error(Rb+"url.method is not used with websocket URLs");if(Sb.url.method="websocket",Qb(Pb.url.wsGreeting,"url.wsGreeting","object",!1),Sb.url.wsGreeting=Pb.url.wsGreeting,Qb(Pb.url.wsCloseCodes,"url.wsCloseCodes","array",!1),Pb.url.wsCloseCodes){for(let Ub=0;Ub<Pb.url.wsCloseCodes.length;Ub++){const Vb="url.wsCloseCodes["+Ub+"]";if(Qb(Pb.url.wsCloseCodes[Ub],Vb,"number",!0),Pb.url.wsCloseCodes[Ub]===zb)throw new Error(Rb+Vb+" cannot be "+zb+" (normal closure)")}Sb.url.wsCloseCodes=Pb.url.wsCloseCodes}else Sb.url.wsCloseCodes=[]}else throw new Error(Rb+"unknown protocol in URL "+Pb.url.address);if("POST"===Tb){if(Qb(Pb.url.postData,"url.postData","object",!0),!Pb.url.postData||1>Object.keys(Pb.url.postData).length)throw new Error(Rb+"url.method is POST but url.postData is undefined or has no length");Sb.url.postData=Pb.url.postData}Qb(Pb.url.pollInterval,"url.pollInterval","number",!1),X(Pb.url.pollInterval)&&Pb.url.pollInterval>yb&&(Sb.url.pollInterval=Pb.url.pollInterval),Qb(Pb.autoConnect,"autoConnect","boolean",!1),X(Pb.autoConnect)&&(Sb.autoConnect=Pb.autoConnect),Qb(Pb.startMinimized,"startMinimized","boolean",!1),X(Pb.startMinimized)&&(Sb.startMinimized=Pb.startMinimized),Qb(Pb.notifications,"notifications","boolean",!1),X(Pb.notifications)&&(Sb.notifications=Pb.notifications),Qb(Pb.fields,"fields","object",!0);for(let Ub=0;Ub<Pb.fields.length;Ub++){const Vb=Pb.fields[Ub],Wb="fields["+Ub+"]";Qb(Vb.prop,Wb+".prop","string",!0),Sb.fields[Vb.prop]={},Qb(Vb.label,Wb+".label","string",!0),Sb.fields[Vb.prop].label=Vb.label,Qb(Vb.suffix,Wb+".suffix","string",!1),Vb.suffix&&(Sb.fields[Vb.prop].suffix=Vb.suffix);const Xb=Vb.lowThresholds,Yb=Vb.highThresholds;if(Qb(Xb,Wb+".highThresholds","object",!1),Xb){if(Qb(Xb.warn,Wb+".lowThresholds.warn","number",!1),Qb(Xb.danger,Wb+".lowThresholds.danger","number",!1),!Xb.warn&&!Xb.danger)throw new Error(Rb+Wb+".lowThresholds must define .warn, .danger or both");Sb.lowThresholds[Vb.prop]=Xb}if(Qb(Yb,Wb+".highThresholds","object",!1),Yb){if(Qb(Yb.warn,Wb+".highThresholds.warn","number",!1),Qb(Yb.danger,Wb+".highThresholds.danger","number",!1),!Yb.warn&&!Yb.danger)throw new Error(Rb+Wb+".highThresholds must define .warn, .danger or both");Sb.highThresholds[Vb.prop]=Yb}Qb(Vb.showLowest,Wb+".showLowest","boolean",!1),Sb.fields[Vb.prop].showLowest=!X(Vb.showLowest)||Vb.showLowest,Qb(Vb.showHighest,Wb+".showHighest","boolean",!1),Sb.fields[Vb.prop].showHighest=!X(Vb.showHighest)||Vb.showHighest}return Sb}function W(Ob){return"undefined"!=typeof Ob}function X(Ob){const Pb="undefined"==typeof Ob;let Qb=!1;return Pb||(Qb=null===Ob),!Pb&&!Qb}const da="menuActive",la="graphFillColor",ma="graphEdgeColor",na="graphLabelColor",oa="graphGridColor",ra="visibilityHidden",sa="visibilityGone",ua="minimized",wa="normal",xa="warn",ya="danger",za="none",Ba="highLowValue",Ca="realtimeMonitorPanel",Da="panelBody",Ea="title",Fa="titleBarControls",Ga="appMenu",Ia="menuItemConnect",Ja="menuItemMinMax",Ka="menuItemNotif",Ma="statusBar",Na="label",Oa="graph",Ta="status",Ua="suffix",Va="Minimize",Xa="Mute Notifications",$a="Connect",_a="Disconnect",eb="highest",fb="lowest",gb=0,hb=1,ib=2,jb=0,kb=1,qb=1,rb=2,sb=3,tb="graphThemeRefresh",ub="reconnect",vb=[],wb="THRESHOLD_NOTIFICATION_ICON_WARN",xb="THRESHOLD_NOTIFICATION_ICON_DANGER",yb=3,zb=1e3,Cb={},Db={},Eb=[],Fb=[],Gb=[],Hb=[];let Jb=0,Kb=null,Lb=!0,Mb=!1,Nb=[];(function(){(function(){function Ob(Pb,Qb){Qb=Qb||{bubbles:!1,cancelable:!1,detail:void 0};var Rb=document.createEvent("CustomEvent");return Rb.initCustomEvent(Pb,Qb.bubbles,Qb.cancelable,Qb.detail),Rb}return"function"!=typeof window.CustomEvent&&void(Ob.prototype=window.Event.prototype,window.CustomEvent=Ob)})()})(),function(Ob,Pb){for(let Qb=0;Qb<Pb.length;Qb++){const Rb=new Image;Rb.src=Pb[Qb][1],Rb.onload=function(){Ob[Pb[Qb][0]]=b(Rb)}}}(vb,[[wb,"img/notification-warn.png"],[xb,"img/notification-danger.png"]]),c(),window.addEventListener("beforeunload",function(){for(let Ob in Cb)C(Ob,!1)}),this.newPanel=function(Ob){function Pb(ac){ac.originalTarget!==Tb&&ac.srcElement!==Tb&&x(Qb.id)}const Qb=document.createElement("div");Qb.id=Ca+Jb,Qb.className="monitoringPanel",Db[Ca+Jb]=Db[Ca+Jb]||[],Cb[Qb.id]=V(Qb.id,Ob);const Rb=document.createElement("div");Rb.id=Qb.id+Ea,Rb.className="titleBar",Rb.addEventListener("dblclick",function(){y(Qb.id)});const Sb=document.createElement("div");Sb.className="titleBarTitle",Sb.appendChild(document.createTextNode(Ob.title)),Rb.appendChild(Sb);const Tb=document.createElement("div");Tb.id=Qb.id+"appMenuBtn",Tb.className="appMenuButton",Tb.addEventListener("click",function(){w(Qb.id)}),Tb.addEventListener("dblclick",function(ac){ac.stopPropagation()}),Qb.addEventListener("click",function(ac){Pb(ac)}),document.addEventListener("click",function(ac){Pb(ac)});const Ub=document.createElement("div");Ub.id=Qb.id+Fa,Ub.appendChild(Tb),Ub.classList.add("titleBarControls"),Rb.appendChild(Ub),Qb.appendChild(Rb);const Vb=document.createElement("div");Vb.id=Qb.id+Ga,Vb.className="applicationMenu",Vb.classList.add(ra),Vb.appendChild(h(Qb.id,Ia,$a,function(){A(Qb.id)})),Vb.appendChild(h(Qb.id,Ja,Va,function(){y(Qb.id)})),Vb.appendChild(h(Qb.id,Ka,Xa,function(){t(Qb.id)})),Vb.appendChild(h(Qb.id,"menuItemClose","Close Panel",function(){K(Qb.id)})),Rb.appendChild(Vb);const Wb=document.createElement("div");Wb.id=Qb.id+Da,Wb.className="panelBody";const Xb=document.createElement("div");Xb.id=Qb.id+Ma,Xb.classList.add("statusBar"),Xb.classList.add(sa),Wb.appendChild(Xb);const Yb=document.createElement("div");Yb.className="fieldsContainer";for(let ac=0;ac<Ob.fields.length;ac++){const bc=Ob.fields[ac];Yb.appendChild(k(gb,bc.prop,Qb.id,bc.label,bc.suffix)),Cb[Qb.id].fields[bc.prop].showLowest&&Yb.appendChild(k(hb,bc.prop,Qb.id,bc.label,bc.suffix)),Cb[Qb.id].fields[bc.prop].showHighest&&Yb.appendChild(k(ib,bc.prop,Qb.id,bc.label,bc.suffix)),Db[Ca+Jb][bc.prop]=null,Db[Ca+Jb][fb+bc.prop]=null,Db[Ca+Jb][eb+bc.prop]=null,Yb.appendChild(m());const cc=n(Qb.id,bc.prop,bc.label+(X(bc.suffix)?" ("+bc.suffix+")":""));Gb[Qb.id]=Gb[Qb.id]||[],Gb[Qb.id][cc.canvas.id]=cc}Wb.appendChild(Yb);const Zb=document.createElement("div");Zb.className="graphContainer",Wb.appendChild(Zb);let $b=!0;for(let ac in Gb[Qb.id]){const bc=Gb[Qb.id][ac].canvas;$b&&bc.classList.remove(sa),Zb.appendChild(bc),$b=!1}Zb.appendChild(d(Qb.id,la)),Zb.appendChild(d(Qb.id,ma)),Zb.appendChild(d(Qb.id,na)),Zb.appendChild(d(Qb.id,oa)),Qb.appendChild(Wb);let _b=new MutationObserver(function(ac){ac.forEach(function(bc){for(let cc=0;cc<bc.addedNodes.length;cc++)bc.addedNodes[cc].id===Qb.id&&(Ob.startMinimized&&y(Qb.id),u(Qb.id,Cb[Qb.id].notifications),Cb[Qb.id].autoConnect&&A(Qb.id),_b.disconnect(),_b=void 0)})});return _b.observe(document.body,{childList:!0}),Hb[Qb.id]=rb,Jb++,Qb},this.getTheme=function(){return O()},this.getAvailableThemes=function(){const Ob=N(),Pb=[];for(let Qb=0;Qb<Ob.length;Qb++)Pb.push(Ob[Qb].title);return Pb},this.loadTheme=function(Ob){const Pb=N();for(let Qb=0;Qb<Pb.length;Qb++)Pb[Qb].disabled=!0,Pb[Qb].title===Ob&&(Pb[Qb].disabled=!1)}}